import*as THREE from"./../vendor/Threejs/r105/build/three.module.js";import{initController}from"./init-min.js";import{devicemotionController}from"./devicemotion-min.js";import{cameraController}from"./camera-min.js";import{lightController}from"./light-min.js";import{meshController}from"./mesh-min.js";import{ButtonizeController}from"./buttonize-min.js";import{mousemoveController}from"./mousemove-min.js";import{HomeSliderInteraction}from"./homeSliderController-min.js";import{Renderer}from"./render-min.js";import{Route}from"./route-min.js";import{Info}from"./info-min.js";import{HomeSlider}from"./homeSlider-min.js";import{SliderNav}from"./sliderNav-min.js";const container=document.getElementById("container"),body=document.querySelector("body"),noise=document.querySelector("#noise");let loader,planeGeo,canvas,currentPlaneObj,scene,camera,pointLight,isMobile,hasNavBar=0,ww=window.innerWidth,hh=window.innerHeight,planes=[],targetY=1,currentPlane=-1;/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)?(body.classList.add("mobile"),isMobile=1):(body.classList.add("desktop"),isMobile=0),/iPhone|iPad|iPod/i.test(navigator.userAgent)&&(isMobile=1,hasNavBar=1);var ua=navigator.userAgent||navigator.vendor||window.opera,isInstagram=ua.indexOf("Instagram")>-1,isMessenger=ua.indexOf("FBAN")>-1;isInstagram&&(hasNavBar=0),isMessenger&&(hasNavBar=0),hasNavBar?body.classList.add("hasNavBar"):body.classList.remove("hasNavBar"),scrollLock.disablePageScroll(),initController.build(),devicemotionController.build(),loader=new THREE.TextureLoader,scene=new THREE.Scene,cameraController.build(THREE),(camera=cameraController.camera()).lookAt(scene.position),1===isMobile&&devicemotionController.build(),meshController.build(loader,THREE),meshController.addPhoto(scene,planes,"./assets/img/refik-color.jpg",0,0,0,0),meshController.addPhoto(scene,planes,"./assets/img/wise-color.jpg",0,-2,0,0),meshController.addPhoto(scene,planes,"./assets/img/ras-color.jpg",0,-4,0,0),meshController.addPhoto(scene,planes,"./assets/img/atolye-color.jpg",0,-6,0,0),meshController.addEmptiness(scene,planes,-7);const commonPlaneId=3;export const Index=function(){return{getPlanes:function(){return planes},getScene:function(){return scene},getCamera:function(){return camera},getIsMobile:function(){return isMobile},setCurrentcard:function(e){currentPlane=e},getCurrentcard:function(){return currentPlane},setTargetY:function(e){targetY=e},getCurrentplaneobj:function(){return currentPlaneObj},setCurrentplaneobj:function(e){currentPlaneObj=e},getWW:function(){return ww},getHH:function(){return hh}}}();function onWindowResize(){if(ww=window.innerWidth,hh=window.innerHeight,camera.aspect=window.innerWidth/window.innerHeight,camera.updateProjectionMatrix(),Renderer.getRenderer().setSize(window.innerWidth,window.innerHeight),window.innerWidth<=800){isMobile=1;let e=cameraController.getCameraVectors();cameraController.setCameraVectors(e),0==Route.getCurrentPageId()&&TweenMax.to(container,1,{opacity:.5}),body.classList.add("mobile"),body.classList.remove("desktop")}else{isMobile=0;let e=cameraController.getCameraVectors();cameraController.setCameraVectors(e),0==Route.getCurrentPageId()&&TweenMax.to(container,1,{opacity:1}),body.classList.add("desktop"),body.classList.remove("mobile")}HomeSlider.updateLogoPosition()}mousemoveController.build(camera,ww,hh,targetY),1===isMobile&&devicemotionController.build(camera,ww,hh,targetY),lightController.build(THREE),pointLight=lightController.getLight(),scene.add(pointLight),Renderer.build(scene,camera,planeGeo,planes),HomeSlider.build(),HomeSliderInteraction.build(camera),ButtonizeController.build(),Info.build(),Route.build(),window.addEventListener("resize",onWindowResize,!1),window.onload=function(e){window.dispatchEvent(new Event("resize")),TweenMax.to(noise,1,{opacity:.15})},SliderNav.build();